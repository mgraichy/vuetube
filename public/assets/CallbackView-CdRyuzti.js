import{b as e,c as _,o as u}from"./index-vVWfynxA.js";async function g(){const o=sessionStorage.getItem("pkce_state"),c=sessionStorage.getItem("pkce_code_verifier"),t=new URLSearchParams(window.location.search),s=t.get("state");try{if(s!==o)throw Error("State check failed")}catch(l){console.log(l);return}const n=t.get("code"),r=new URL(e.oauthAccessToken),a={Accept:"application/json, text/plain, */*","Content-Type":"application/json",Origin:e.redirectUri},i={grant_type:e.grantType,client_id:e.clientId,redirect_uri:e.redirectUri,code_verifier:c,code:n},p=JSON.stringify(i),d=await(await fetch(r,{headers:a,body:p,method:"post",mode:"cors"})).json();sessionStorage.setItem("access_token",d.access_token)}const k={__name:"CallbackView",setup(o){return g(),(c,t)=>(u(),_("div",null,"CALLBACK"))}};export{k as default};
