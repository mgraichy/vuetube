import{r as $,i as m,l as F,u as j,m as S,c as J,n as L,b as a,o as c,a as l,g as e,t,F as h,e as g,f as p,j as V,h as O,k as T}from"./index-6pVjbv8z.js";import{c as d}from"./formatTime-BG9yVpUy.js";const U={key:0,class:"grid 2xl:grid-cols-[4fr_1fr] xl:grid-cols-[3fr_1fr] lg:grid-cols-[2fr_1fr] lg:mr-0 mx-2"},A={id:"grid-column-1"},P={class:"justify-self-center cursor-pointer aspect-video w-full h-auto",crossorigin:"use-credentials",controls:""},R=["src"],W={class:"flex m-2"},E={class:"rounded-full self-center h-12 w-12 bg-vue mr-4 text-center leading-[3rem]"},z={class:"flex flex-col"},G={class:"font-bold text-xl"},H={class:"text-sm"},I={class:"flex flex-col mb-2"},K={class:"bg-[#3f3f3f] rounded-lg w-full p-3 text-white"},M={class:"mb-2 text-lg font-bold"},Q={class:"mb-2"},X={key:0,class:"flex mt-4 mb-4"},Y=["src"],Z={class:"flex flex-col"},ee={class:"font-bold"},se={class:"text-sm"},te={id:"grid-column-2"},oe={id:"right-sidebar-small-screens",class:"lg:hidden ml-2"},ie=["onClick"],re={class:"aspect-video mb-2"},ce={crossorigin:"use-credentials",class:"max-w-full h-auto rounded-md transition:all duration-1000 hover:rounded-none"},le=["id","src"],ae={class:"flex flex-col"},ne={class:"text-base font-extrabold w-full cursor-pointer"},de={class:"text-sm pb-0.5 w-full text-gray-300 cursor-pointer"},ue={class:"text-xs mb-1 w-full text-gray-300 cursor-pointer"},_e={id:"right-sidebar-large-screens",class:"hidden lg:block ml-2"},ve=["onClick"],fe={class:"aspect-video mb-2"},me={crossorigin:"use-credentials",class:"w-full h-auto rounded-md transition:all duration-1000 hover:rounded-none"},he=["id","src"],ge={class:"flex flex-col"},pe={class:"lg:text-sm text-base font-extrabold w-full cursor-pointer"},xe={class:"lg:text-xs text-sm pb-0.5 w-full text-gray-300 cursor-pointer"},we={class:"text-xs mb-1 w-full text-gray-300 cursor-pointer"},be={__name:"Watch",setup(C){const n=$([{}]),u=`${V.oauthUri}/api/comments`,x=m("isLoading"),_=m("videoStringArray"),D=m("leftSidebar");D.value=!1;const B=`${V.oauthUri}/api/videos`,w=F(),N=j(),b=JSON.parse(w.query.vid||"{}"),o=$(b);S(`${u}?id=${b.id}`,n);function y(i){N.push({name:"watch",params:{id:i.id},query:{vid:JSON.stringify(i)}}),o.value=i,S(`${u}?id=${i.id}`,n)}const k=J(()=>{if(_)return _.value.filter(i=>i.id!==o.value.id)});L(()=>w.query.vid,i=>{o.value=JSON.parse(i)});async function v(i,f){if(!i||!f)return;x.value=!0;const s=`${B}?file=${i}`;await O(s,f),setTimeout(()=>{x.value=!1},1200)}return(i,f)=>a(_)?(c(),l("div",U,[e("div",A,[e("video",P,[e("source",{id:"source-main-video",src:v(o.value.src,"source-main-video"),type:"video/mp4"},null,8,R)]),e("div",W,[e("div",E,t(o.value.initials),1),e("div",z,[e("div",G,t(o.value.title),1),e("div",null,t(o.value.name),1),e("div",H,t(o.value.views)+" views • "+t(a(d)(new Date(o.value.date))),1)])]),e("div",I,[e("div",K,[e("div",M,t(o.value.views)+" views • "+t(a(d)(new Date(o.value.date))),1),e("div",Q,t(o.value.comment),1),e("div",null,t(o.value.comment),1)])]),n.value?(c(!0),l(h,{key:0},g(n.value,(s,r)=>(c(),l("div",{key:r},[s?(c(),l("div",X,[e("img",{class:"rounded-full h-12 w-12 mr-4",src:s.picture},null,8,Y),e("div",Z,[e("div",ee,t(s.name)+" • "+t(a(d)(new Date(s.date))),1),e("div",se,t(s.comment),1)])])):p("",!0)]))),128)):p("",!0)]),e("div",te,[e("div",oe,[(c(!0),l(h,null,g(k.value,(s,r)=>(c(),l("div",{key:r,onClick:q=>y(s),class:"grid gap-x-1 grid-cols-[160px,1fr] cursor-pointer"},[e("div",re,[e("video",ce,[e("source",{id:`source-small-screen-${r}`,src:v(s.src,`source-small-screen-${r}`),type:"video/mp4"},null,8,le)])]),e("div",ae,[e("div",ne,t(s.title),1),e("div",de,t(s.name),1),e("div",ue,t(s.views)+" views • "+t(a(d)(new Date(s.date))),1)])],8,ie))),128))]),e("div",_e,[(c(!0),l(h,null,g(k.value,(s,r)=>(c(),l("div",{key:r,onClick:q=>y(s),class:"grid gap-x-1 grid-cols-[160px,1fr] cursor-pointer"},[e("div",fe,[e("video",me,[e("source",{id:`source-large-screen-${r}`,src:v(s.src,`source-large-screen-${r}`),type:"video/mp4"},null,8,he)])]),e("div",ge,[e("div",pe,t(s.title),1),e("div",xe,t(s.name),1),e("div",we,t(s.views)+" views • "+t(a(d)(new Date(s.date))),1)])],8,ve))),128))])])])):p("",!0)}},$e={__name:"WatchPage",setup(C){return(n,u)=>(c(),T(be))}};export{$e as default};
